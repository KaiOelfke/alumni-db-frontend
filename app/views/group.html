<div class="siteCoverContainer">
  <h3 class="coverTitle">{{groupCtrl.group.name}}</h3>
</div>

<div class="siteDescription">
  {{groupCtrl.group.description}}
</div>
<div class="siteDescription">
  {{groupCtrl.group.group_email_enabled}}
</div>

<div class="two-page-layout clearfix">
  <div class="sidebar">
      <div class="groupInfo">
        <h3 class="groupInfoTitle">Group Info</h3>
        <div class="groupInfoElemenet">
          <span class="groupInfoElementDesc icon">
            <i class="fa fa-envelope-o"></i>
          </span>
          <span class="groupInfoElementDesc info">Email newsletter</span>
        </div>
        <div class="groupInfoElemenet">
          <span class="groupInfoElementDesc">
            Join date
          </span>
            {{groupCtrl.userMembership.join_date}}
        </div>
        <div class="groupInfoElemenet">
          <span class="groupInfoElementDesc">
            Position
          </span>
            {{groupCtrl.userMembership.position}}
        </div>
      </div>
      <p>Email subscription: {{groupCtrl.userMembership.group_email_subscribed}}</p>
      <p>Is admin: {{groupCtrl.userMembership.is_admin}}</p>
      <p>Group email: {{!!groupCtrl.group.group_email_enabled}}</p>
      <p>
        <button 
          class="btn btn-primary" 
          ng-show="groupCtrl.userMembership.is_admin || groupCtrl.isSuperUser" 
          ng-click="groupCtrl.openEditGroup()">
          Edit Group
        </button>
      </p>
      <p>
        <button 
          class="btn btn-primary" 
          ng-click="groupCtrl.openEditMembership(groupCtrl.userMembership)">
          Edit Membership
        </button>
      </p>
      <p>
        <button 
          class="btn btn-default btn-leave" 
          ng-click="groupCtrl.unsubscribe(groupCtrl.userMembership)">
          Leave
        </button>
      </p>
  </div>
  <div class="main-container">
    <div class="main-content">
      <table class="table">
        <thead>
          <tr>
            <th>name</th>
            <th ng-show="groupCtrl.userMembership.is_admin || groupCtrl.isSuperUser ">edit</th>
            <th ng-show="groupCtrl.userMembership.is_admin || groupCtrl.isSuperUser ">unsubscribe</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="user in groupCtrl.users">
            <td>
              <a ui-sref='home.profile-show({id: user.user.id})'>
                {{user.user.first_name}} {{user.user.last_name}}
              </a>
            </td>
            <td ng-show="groupCtrl.userMembership.is_admin || groupCtrl.isSuperUser ">
              <button  ng-click="groupCtrl.openEditMembership(user.membership)"
                              class="btn btn-default">edit</button>
            </td>
            <td ng-show="groupCtrl.userMembership.is_admin || groupCtrl.isSuperUser ">
              <button  ng-click="groupCtrl.unsubscribe(user.membership)"
                              class="btn btn-default">Unsubscribe</button>
            </td>           
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<script type="text/ng-template" id="editGroup.html">
    <div class="modal-header">
        <h3 class="modal-title">Edit Group</h3>
    </div>
    <div class="modal-body">
		<form >
		  <div class="form-group">
		    <label for="name">name</label>
		    <input ng-model="group.name" type="text" 
		    			 class="form-control" id="name" placeholder="{{group.name}}">
		  </div>
		  <div class="form-group">
		    <label for="description">description</label>
		    <input ng-model="group.description" type="text"
		    			class="form-control" id="description" placeholder="{{group.description}}">
		  </div>
		  <div class="form-group">
		    <label for="groupemail">group email</label>
		    <button type="button" class="btn btn-success" ng-model="group.group_email_enabled" 
		    			btn-checkbox btn-checkbox-true="true" btn-checkbox-false="false" for="groupemail"> 
		    			enabled
		    </button>
		  </div> 
		</form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()">OK</button>
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
</script>

<script type="text/ng-template" id="editMembership.html">
    <div class="modal-header">
        <h3 class="modal-title">Edit Membership</h3>
    </div>
    <div class="modal-body">
		<form >
		  <div class="form-group">
		    <label for="groupemail">group email</label>
		    <button type="button" class="btn btn-success" ng-model="membership.group_email_subscribed" 
		    			btn-checkbox btn-checkbox-true="true" btn-checkbox-false="false" for="groupemail"> 
		    			enabled
		    </button>
		  </div>

		  <div ng-show="membership.is_admin || isSuperUser ">
			  <div class="form-group">
			    <label for="description">position</label>
			    <input ng-model="membership.position" type="text"
			    			class="form-control" id="description" placeholder="{{membership.position}}">
			  </div>
			  <div class="form-group">
			    <label for="isadmin">admin</label>
			    <button type="button" class="btn btn-success" ng-model="membership.is_admin" 
			    			btn-checkbox btn-checkbox-true="true" btn-checkbox-false="false" for="isadmin"> 
			    			enabled
			    </button>
			  </div> 
		  </div>


		</form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()">OK</button>
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
</script>
